[package]
name          = "body-image"
version       = "0.4.0"
authors       = ["David Kellum <dek-oss@gravitext.com>"]
license       = "MIT/Apache-2.0"
description   = "Adaptive RAM/file-backed HTTP bodies and BARC serialization."
documentation = "https://docs.rs/body-image"
repository    = "https://github.com/dekellum/body-image"
readme        = "README.md"
keywords      = [
    "buffer", "compression",
    "http", "serialization", "hyper",
]
categories    = [
    "web-programming::http-client",
    "web-programming::http-server",
]
exclude       = [
    ".gitignore",
    ".travis.yml",
    "appveyor.yml",
    "barc/*",
]

[badges]
travis-ci = { repository = "dekellum/body-image" }

[dependencies]
brotli     = { version = ">=2.2.1, <3", optional = true }
bytes      = ">=0.4.6, <2"
clap       = { version = ">=2.31.2, <3", optional = true, default-features = false, features = ["wrap_help"] }
failure    = ">=0.1.0, <2"
fern       = { version = ">=0.5.5, <2", optional = true }
flate2     = ">=1.0.1, <2"
futures    = { version = ">=0.1.20, <0.2", optional = true }
http       = ">=0.1.4, <2"
httparse   = ">=1.2.4, <2"
hyper      = { version = ">=0.12.1, <2", optional = true }
hyper-tls  = { version = ">=0.2.0, <2",  optional = true }
hyperx     = { version = ">=0.12.0, <2", optional = true }
log        = ">=0.4.0, <2"
olio       = { version = ">=0.2.0, <2", default-features = false }
memmap     = { version = ">=0.6.2, <2", optional = true }
tempfile   = ">=2.2.0, <4"
tokio      = { version = ">=0.1.7, <0.2", optional = true }
tokio-threadpool = { version = ">=0.1.4, <0.2", optional = true }

[features]
default = ["mmap", "brotli", "cli"]
client = ["futures", "hyper", "hyper-tls", "hyperx",
          "tokio", "tokio-threadpool"]
cli = ["fern", "clap"]
mmap = ["memmap", "olio/mmap"]
live_test = ["client"]

[lib]
doctest = false

[[bin]]
name = "barc"
path = "src/main.rs"
test = false
doctest = false
bench = false
doc = false
required-features = ["cli"]

[package.metadata.docs.rs]
features = ["mmap", "brotli", "client"]

[dev-dependencies]
lazy_static = { version = ">=1.0.1, <2" }
fern        = { version = ">=0.5.5, <2" }
hyper-stub  = { version = ">=0.1.0, <2" }
